@{
    ViewBag.Title = "Crédito Solidario Nuevo";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<!-- Content Wrapper. Contains page content -->

<div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <section class="content-header">
        <h1>
            Crédito Solidario Nuevo
        </h1>
        <ol class="breadcrumb">
            <li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
            <li><a href="#">Crédito Solidario</a></li>
            <li class="active">Crédito Solidario Nuevo</li>
        </ol>
    </section>
    <!-- Main content -->
    <section class="content">
        <div class="row">
            <!-- left column -->
            <div class="col-md-12">
                <!-- general form elements -->
                <div class="box box-primary">
                    <div class="box-header with-border">
                        <h2 class="box-title">Crédito Solidario Nuevo</h2>
                    </div>
                    <!-- /.box-header -->
                    <div class="box-body">
                        <div class="row">
                            <div class="col-xs-6 col-md-3">
                                <label>Documento:</label>
                                <select class="form-control select2" id="tipo_check">
                                    <option selectd value="0">Selecciona</option>
                                </select>
                            </div>
                            <div class="col-xs-6 col-md-3">
                                <label>Sucursal:</label>
                                <select class="form-control select2" id="sucursal">
                                    <option selectd value="0">Selecciona</option>
                                    <option value="1">Independencia</option>
                                    <option value="2">Hidalgo</option>
                                </select>
                            </div>
                            <div class="col-xs-6 col-md-3">
                                <label>Asesor:</label>
                                <select class="form-control select2" id="asesor">
                                    <option selectd value="0">Selecciona</option>
                                    <option value="1">Yaneli Hernandez</option>
                                    <option value="2">Margarita Reyes</option>
                                    <option value="3">Gilberto Rodriguez</option>
                                </select>
                            </div>
                            <div class="col-xs-6 col-md-3">
                                <label>Grupo Solidario:</label>
                                <select class="form-control select2" id="grupoS">
                                    <option selectd value="0">Selecciona</option>
                                    <option value="1">Los Supers</option>
                                    <option value="2">Las DIVAS</option>
                                    <option value="3">Los Aterciopelados</option>
                                </select>
                            </div>
                        </div>
                        <div class="row mt-5">
                            <div class="col-xs-6 col-md-3">
                                <label>Fecha:</label>
                                <input type="text" class="form-control pull-right" id="fecha">
                            </div>
                            <div class="col-xs-6 col-md-3">
                                <label>Código de operación</label>
                                <input type="text" class="form-control" id="codigo_opera" style="text-transform:uppercase" maxlength="20" />
                            </div>
                            <div class="col-xs-6 col-md-3">
                                <label>Tipo de Garantía:</label>
                                <select class="form-control select2" id="tipo_garantia">
                                    <option selectd value="0">Selecciona</option>
                                    <option value="1">Solidaria "Pura"</option>
                                    <option value="2">Solidaria mixta</option>
                                </select>
                            </div>
                            <div class="col-xs-6 col-md-3">
                                <label>Secuencia de crédito base:</label>
                                <input type="text" class="form-control" id="secuencia_cb" maxlength="4" />
                            </div>
                        </div>
                        <div class="row mt-5">
                            <div class="col-xs-6 col-md-3">
                                <label>Grupo Recomendado por:</label>
                                <input type="text" class="form-control" id="grupo_recomendado" />
                            </div>
                            <div class="col-xs-6 col-md-3">
                                <label>Monto solicitado de crédito</label>
                                <input type="text" class="form-control" id="monto_solicitado" maxlength="8" onkeypress="return isNumberKey(event)" />
                            </div>
                            <div class="col-xs-6 col-md-3">
                                <label>Saldo insoluto</label>
                                <input type="text" class="form-control" id="saldo_insoluto" maxlength="2" onkeypress="return isNumberKey(event)" />
                            </div>
                            <div class="col-xs-6 col-md-3">
                                <label>Número de Cuotas</label>
                                <input type="text" class="form-control" id="cuotas" maxlength="4" onkeypress="return isNumberKey(event)" />
                            </div>
                        </div>
                        <hr />
                        <div class="row mt-5">
                            <div class="col-xs-6 col-md-3">
                                <label>Fecha recibo</label>
                                <input type="text" class="form-control" id="fecha_recibo" />
                            </div>
                            <div class="col-xs-6 col-md-3">
                                <label>Fecha de Pago</label>
                                <input type="text" class="form-control" id="fecha_pago" />
                            </div>
                            <div class="col-xs-6 col-md-3">
                                <label>Días de Pago</label>
                                <select class="form-control select2" id="dia_pago">
                                    <option selectd value="0">Selecciona</option>
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5</option>
                                    <option value="6">6</option>
                                    <option value="7">7</option>
                                    <option value="8">8</option>
                                    <option value="9">9</option>
                                    <option value="10">10</option>
                                    <option value="11">11</option>
                                    <option value="12">12</option>
                                    <option value="13">13</option>
                                    <option value="14">14</option>
                                    <option value="15">15</option>
                                    <option value="16">16</option>
                                    <option value="17">17</option>
                                    <option value="18">18</option>
                                    <option value="19">19</option>
                                    <option value="20">20</option>
                                    <option value="21">21</option>
                                    <option value="22">22</option>
                                    <option value="23">23</option>
                                    <option value="24">24</option>
                                    <option value="25">25</option>
                                    <option value="26">26</option>
                                    <option value="27">27</option>
                                    <option value="28">28</option>
                                </select>
                            </div>
                            <div class="col-xs-6 col-md-3">
                                <label>Canal de Pago:</label>
                                <select class="form-control select2" id="canal_pagoS">
                                    <option selectd value="0">Selecciona</option>
                                    <option value="1">Sucursal</option>
                                    <option value="2">Pago Referenciado</option>
                                    <option value="3">Banca Electrónica</option>
                                    <option value="4">Practicajas</option>
                                    <option value="5">Banco</option>
                                </select>
                            </div>
                        </div>
                        <div class="row mt-5">
                            <div class="col-xs-9 col-md-9"></div>
                            <div class="col-xs-3 col-md-3" id="div_bancoS" style="display:none">
                                <label>Banco:</label>
                                <input type="text" class="form-control" id="bancoS" />
                            </div>
                        </div>
                        <div class="row mt-5">
                            <div class="col-xs-6 col-md-3">
                                <label>Modo de Pago</label>
                                <select class="form-control select2" id="modo_pago">
                                    <option selectd value="0">Selecciona</option>
                                    <option value="1">Efectivo</option>
                                    <option value="2">Cheque</option>
                                    <option value="3">Transferencia</option>
                                </select>
                            </div>
                            <div class="col-xs-6 col-md-3">
                                <br />
                                <label>Manifiesto</label>
                                <input type="checkbox" id="manifiesto" name="manifiesto" value="1" class="minimal" checked>
                            </div>
                            <div class="col-xs-6 col-md-3">
                                <br />
                                <label>Accionista</label>
                                <input type="checkbox" id="accionista" name="accionista" value="1" class="minimal" checked>
                            </div>
                            <div class="col-xs-6 col-md-3">
                                <input type="hidden" id="tipo_documento" value="FPDC.AE-012.4" />
                            </div>
                        </div>
                        <hr />
                            <div class="row mt-5">
                                <div class="col-xs-12 col-md-12 table-responsive">
                                    <table id="table-datos" class="table table-bordered table-striped">
                                        <thead>
                                            <tr>
                                                <th>Cargo</th>
                                                <th>Nombres</th>
                                                <th>Tipo Transacción</th>
                                                <th>Monto estimado de operaciones realizadas al mes</th>
                                                <th>Número estimado de operaciones a realizar al mes </th>
                                                <th>Nivel de Riesgo de PLD </th>
                                                <th>Código del Cliente</th>
                                                <th>Ingreso Semanal</th>
                                                <th>Monto</th>
                                            </tr>
                                        </thead>
                                        <tbody id="bodyDetalles"></tbody>
                                    </table>
                                </div>
                                <div class="col-xs-6 col-md-3">
                                    <label>Monto Grupal Solicitado</label>
                                    <input type="text" class="form-control" id="monto_grupal" />
                                </div>
                            </div>
                        </div>
                    <!-- /.box-body -->
                    <div class="box-footer">
                        <button class="btn btn-primary" onclick="addCreditoSol()"><i class="fa fa-save"></i> Agregar</button>
                    </div>

                </div>
                <!-- /.box -->
            </div>
            <!--/.col (left) -->
        </div>
        <!-- /.row -->
    </section>
    <!-- /.content -->
</div>
<!-- /.content-wrapper -->
<div class="modal fade" id="modal_saveG">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title">Agregar Garantia</h4>
            </div>
            <div class="modal-body" style="text-align:center">
                <div class="row">
                    <div class="col-xs-6 col-md-12">
                        <label>Nombre del Cliente</label>
                        <select class="form-control select-2" id="nombre_cliente">
                            <option selected value="0">Selecciona</option>
                            <option value="1">Miranda Carvajal</option>
                            <option value="2">Angel Amigon</option>
                            <option value="3">Yahir Pereira</option>
                        </select>
                    </div>
                </div>
                <div class="row">
                    <div class="col-xs-12 col-md-12">
                        <p>¿El negocio está funcionando?</p>
                        <br />
                        <label>
                            Si <input type="radio" name="res1" class="minimal" value="1" checked>
                        </label>
                        <label>
                            No <input type="radio" name="res1" value="0" class="minimal">
                        </label>
                    </div>
                    <div class="col-xs-12 col-md-12">
                        <p>¿La información y foto (tomada por el asesor) coincide con el negocio que observa en la supervisión? </p>
                        <br />
                        <label>
                            Si <input type="radio" name="res2" class="minimal" value="1" checked>
                        </label>
                        <label>
                            No <input type="radio" name="res2" value="0" class="minimal">
                        </label>
                    </div>
                    <div class="col-xs-12 col-md-12">

                        <p>¿La información y foto (tomada por el asesor) coincide con el domicilio del cliente? </p>
                        <br />
                        <label>
                            Si <input type="radio" name="res3" class="minimal" value="1" checked>
                        </label>
                        <label>
                            No <input type="radio" name="res3" value="0" class="minimal">
                        </label>
                    </div>
                    <div class="col-xs-12 col-md-12">
                        <p>¿La distancia entre los integrantes del grupo cumple con políticas? ¿Se ubicó al aval? </p>
                        <br />
                        <label>
                            Si <input type="radio" name="res4" class="minimal" value="1" checked>
                        </label>
                        <label>
                            No <input type="radio" name="res4" value="0" class="minimal">
                        </label>
                    </div>
                    <div class="col-xs-12 col-md-12">
                        <p>¿El cliente conoce el domicilio y negocio de sus compañeros de grupo? o ¿el aval conoce el domicilio y negocio del titular?</p>
                        <br />
                        <label>
                            Si <input type="radio" name="res5" class="minimal" value="1" checked>
                        </label>
                        <label>
                            No <input type="radio" name="res5" value="0" class="minimal">
                        </label>
                    </div>
                    <div class="col-xs-12 col-md-12">
                        <p>¿El Comité de grupo conoce sus responsabilidades? o ¿El aval conoce sus responsabilidades? </p>
                        <br />
                        <label>
                            Si <input type="radio" name="res6" class="minimal" value="1" checked>
                        </label>
                        <label>
                            No <input type="radio" name="res6" value="0" class="minimal">
                        </label>
                    </div>
                    <div class="col-xs-12 col-md-12">
                        <p>¿El cliente, conoce y avala a sus compañeros del grupo? o ¿El aval conoce y respalda al titular?</p>
                        <br />
                        <label>
                            Si <input type="radio" name="res7" class="minimal" value="1" checked>
                        </label>
                        <label>
                            No <input type="radio" name="res7" value="0" class="minimal">
                        </label>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default pull-left" data-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-primary" id="btn_supervision">Aceptar</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>
@section Scripts
{
    <script>
        $(document).ready(function () {
            $('.select2').select2();
            $('#importe_credito').maskMoney();
            $('#monto_grupal').maskMoney();
            //Flat red color scheme for iCheck
            $('input[type="checkbox"].flat-red, input[type="radio"].flat-red').iCheck({
                checkboxClass: 'icheckbox_flat-green',
                radioClass: 'iradio_flat-green'
            })
            $('input[type="checkbox"].minimal, input[type="radio"].minimal').iCheck({
                checkboxClass: 'icheckbox_minimal-blue',
                radioClass: 'iradio_minimal-blue'
            })
            $('#fecha').datepicker({
                autoclose: true,
                dateFormat: 'dd/mm/yyyy',
                Default: "es"

            })
            $('#fecha_recibo').datepicker({
                autoclose: true,
                dateFormat: 'dd/mm/yyyy',
                Default: "es"

            })
            $('#fecha_pago').datepicker({
                autoclose: true,
                dateFormat: 'dd/mm/yyyy',
                Default: "es"

            })
            $("#fecha").keypress(function (event) { event.preventDefault(); });
            $("#fecha_recibo").keypress(function (event) { event.preventDefault(); });
            $("#fecha_pago").keypress(function (event) { event.preventDefault(); });
            $('.flat-red').on('ifChanged', function (event) {
                if (event.target.checked == true) {
                    if (event.target.value == 1) {
                        $("#div_clienteS").css('visibility', 'visible');
                        $("#div_grupoS").css('visibility', 'hidden');
                    } else {
                        $("#div_clienteS").css('visibility', 'hidden');
                        $("#div_grupoS").css('visibility', 'visible');
                    }

                }
            });
            consultaContenidoCheck();

            $("#canal_pagoS").change(function () {
                var canal_pago = $('#canal_pagoS option:selected').val() == undefined ? '0' : $('#canal_pagoS option:selected').val();
                if (canal_pago == 5) {
                    $("#div_bancoS").css('display', 'block');
                } else {
                    $("#div_bancoS").css('display', 'none');
                }
            });
            var grups = [];
            grups.push({
                "cargo": "S",
                "nombres": "Carlos Huerta Jimenez",
                "tipo_transaccion": "OC",
                "monto_mes": "2500",
                "numero_mes": "3",
                "nivel_riesgo": "A",
                "codigo_cliente": "34DS2XC9",
                "ingreso_semanal": "5000",
                "monto": "1500"
            }, {
                    "cargo": "S",
                    "nombres": "Yurieli Hernandéz Cerón",
                    "tipo_transaccion": "OC",
                    "monto_mes": "500",
                    "numero_mes": "5",
                    "nivel_riesgo": "B",
                    "codigo_cliente": "YHC90SH",
                    "ingreso_semanal": "3000",
                    "monto": "500"
            }, {
                "cargo": "C",
                "nombres": "Ivana Luna Coca",
                "tipo_transaccion": "PC",
                "monto_mes": "1500",
                "numero_mes": "2",
                "nivel_riesgo": "M",
                "codigo_cliente": "LC87HSGH",
                "ingreso_semanal": "7000",
                "monto": "3000"
            });
            $("#grupoS").change(function () {
                
                console.log(grups);
                $("#bodyDetalles").empty();
                var s = "";
                for (var r = 0; r < grups.length; r++) {

                    s += '<tr><td>' + grups[r].cargo + '</td><td>' + grups[r].nombres + '</td><td>' + grups[r].tipo_transaccion + '</td><td>' + grups[r].monto_mes + '</td><td>' + grups[r].numero_mes + '</td><td>' + grups[r].nivel_riesgo + '</td><td>' + grups[r].codigo_cliente + '</td><td>' + grups[r].ingreso_semanal + '</td><td>' + grups[r].monto+'</td></tr>';
                }
                $("#bodyDetalles").append(s);
            });

            $('#table-datos').DataTable({
                'paging': true,
                'lengthChange': false,
                'searching': false,
                'ordering': true,
                'info': true,
                'autoWidth': false,
                "language": {
                    "sProcessing": "Procesando...",
                    "sLengthMenu": "Mostrar _MENU_ registros",
                    "sZeroRecords": "No se encontraron resultados",
                    "sEmptyTable": "Ningún dato disponible en esta tabla",
                    "sInfo": "Registros del _START_ al _END_  total: _TOTAL_ ",
                    "sInfoEmpty": "Sin registros",
                    "sInfoFiltered": "(filtrado de un total de _MAX_ registros)",
                    "sInfoPostFix": "",
                    "sSearch": "Buscar:",
                    "sUrl": "",
                    "sInfoThousands": ",",
                    "sLoadingRecords": "Cargando...",
                    "oPaginate": {
                        "sFirst": "Primero",
                        "sLast": "Último",
                        "sNext": "Siguiente",
                        "sPrevious": "Anterior"
                    },
                    "oAria": {
                        "sSortAscending": ": Activar para ordenar la columna de manera ascendente",
                        "sSortDescending": ": Activar para ordenar la columna de manera descendente"
                    }
                }
            });
        });
        
    </script>
}


